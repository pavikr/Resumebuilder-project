<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="resumebuilder.js"></script>

</head>
<body>
    <h1>VIEW RESUME</h1>
    <ul>
        <li><a href="#" onclick="goToTemplate(1)">Template 1</a></li>
        <li><a href="#" onclick="goToTemplate(2)">Template 2</a></li>
        <li><a href="#" onclick="goToTemplate(3)">Template 3</a></li>
        <!-- <li><a href="#" onclick="goToTemplate(4)">Template 4</a></li>
        <li><a href="#" onclick="goToTemplate(5)">Template 5</a></li> -->
    </ul>

    <label ><h1>TITLE</h1></label>
    <h2 id="titleview"></h2>
    
    
    <label ><h1>Name</h1></label>
    <h2 id="name"></h2> 
    
    <label ><h1>Contact</h1></label>
    <h2 id="contact"></h2> 
    <label ><h1>place</h1></label>
    <h2 id="place"></h2>
    <label ><h1>email</h1></label>
    <h2 id="email"></h2>
    <h2 id="objectives"></h2>
    <label><H1>personal_details</H1></label>
    <h2 id="fathername"></h2>
    <h2 id="mothername"></h2>
    
    <h2 id="address"></h2>
    
    <h2 id="gender"></h2>
    <h2 id="DOB"></h2>
    
   <label> <h2>Education</h2></label>
    <table border="1">
        <thead>
            <th>course_name</th>
            <th>inst_name</th>
            <th>percentage</th>
            <th> year_of_passed</th>
        </thead>
        <tbody id="trs">
    </tbody>
    </table>

    <h2>project</h2>
    <table border="1">
        <thead>
            <th>project_name</th>
            <th>duration</th>
            <th>position</th>
            <th> organization</th>
        </thead>
        <tbody id="input">
    </tbody>
    </table>

    <h2>Experience</h2>

    <table border="1">
        <thead>
            <th>company_name</th>
            <th>year</th>
            <th>position</th>
            <th>year_of_experience</th>
        </thead>
        <tbody id="data">
        </tbody>
    </table>
    <h2>Skills</h2>
    <ul id="skill">

    </ul>
    <h2>Hobbies</h2>
    <ul id="hobby">
    </ul>
     <h2>Langages_known</h2>
    <ul id="languages">
    </ul> 
    <H1>Declaration</H1>
    <h2 id="declaration"></h2>
    

<button type="button" onclick="logout()">logout</button>


    
</body>
<script>
    let idparams= new URLSearchParams(document.location.search);
    let id1=idparams.get("id");
    console.log(id1)
     function goToTemplate(template_id){
        if(template_id==1){
    window.location=`template_1/index.html?id=${id1}`
}
else if(template_id==2){
    window.location=`template_2/index.html?id=${id1}`
}
else if(template_id==3){
    window.location=`template_3/index.html?id=${id1}`
}
}
function logout(){
    localStorage.removeItem("userdatas")
    window.location="login.html"
}
</script>
<script type="module">
    // let params= new URLSearchParams(document.location.search);
    // let id=params.get("id");
//     let existing_list=localStorage.getItem("resume_list");
//     let existing_data=JSON.parse(existing_list);
//     document.getElementById("title").innerHTML=existing_data[index].title;
//     document.getElementById("name").innerHTML=existing_data[index].name;
//     document.getElementById("contact").innerHTML=existing_data[index].contact;
//     document.getElementById("place").innerHTML=existing_data[index].place;
//     document.getElementById("email").innerHTML=existing_data[index].email;
//     document.getElementById("fathername").innerHTML = existing_data[index].personal_details.fathername
//     document.getElementById("mothername").innerHTML = existing_data[index].personal_details.mothername
//     document.getElementById("gender").innerHTML = existing_data[index].personal_details.gender
//     document.getElementById("address").innerHTML = existing_data[index].personal_details.Address
//     document.getElementById("DOB").innerHTML = existing_data[index].personal_details.DOB
//     document.getElementById("declaration").innerHTML = existing_data[index].declaration

//     let trs="";
   
//     for (let each of existing_data[index].education){
//         trs=trs+`<tr><td>${each.course_name}</td>
//             <td>${each.inst_name}</td>
//             <td>${each.percentage}</td>
//             <td>${each. year_of_passed}</td></tr>`
//     }
//     document.getElementById("trs").innerHTML=trs
//     let input="";
//     for (let each of existing_data[index].project){
//         input=input+`<tr><td>${each.project_name}</td>
//             <td>${each.duration}</td>
//             <td>${each.position}</td>
//             <td>${each.organization}</td></tr>`
//     }
//     document.getElementById("input").innerHTML=input

//     let data="";
//     for (let each of existing_data[index].experience){
//         data=data+`<tr><td>${each.company_name}</td>
//             <td>${each.year}</td>
//             <td>${each.position}</td>
//             <td>${each.year_of_experience}</td></tr>`
//     }
//     document.getElementById("data").innerHTML=input

//     let list=""
//     for(let each of existing_data[index].skills){
//         list=list+`<li>${each}</li>`
//     }
// document.getElementById("skill").innerHTML=list


// let hobby=""
// for(let each of existing_data[index].personal_details.hobbies){
//     hobby=hobby+`<li>${each}</li>`
//     }
//     document.getElementById("hobby").innerHTML=hobby
   
// let language=""
// for(let each of existing_data[index].personal_details.languages){
//     language=language+`<li>${each}</li>`
//      }
//    document.getElementById("languages").innerHTML=language  
   
        //Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
        import { getFirestore,setDoc,addDoc,doc,collection,getDocs,deleteDoc } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyBPPPJea_7wZNMX17I1WSKwhrpfxNEcABQ",
          authDomain: "resume-builder-aceb0.firebaseapp.com",
          projectId: "resume-builder-aceb0",
          storageBucket: "resume-builder-aceb0.appspot.com",
          messagingSenderId: "588683110495",
          appId: "1:588683110495:web:a19530bf7d9c17ce8d53ea"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db=getFirestore(app);
        let params= new URLSearchParams(document.location.search);
        let id=params.get("id");
        
        getDocs(collection(db,"resumes")).then(docSnap =>{
        docSnap.forEach((doc)=>{
            if(id==doc.id){
                let resumeData=doc.data();
                 document.getElementById("titleview").innerHTML= resumeData.title;
                 document.getElementById("name").innerHTML= resumeData.name;
                 document.getElementById("place").innerHTML= resumeData.place;
                 document.getElementById("objectives").innerHTML= resumeData.objectives;
                 document.getElementById("contact").innerHTML= resumeData.contact;
                 document.getElementById("email").innerHTML=resumeData.email;
                 document.getElementById("fathername").innerHTML = resumeData.personal_details.fathername
                document.getElementById("mothername").innerHTML = resumeData.personal_details.mothername
                document.getElementById("gender").innerHTML = resumeData.personal_details.gender
                document.getElementById("address").innerHTML = resumeData.personal_details.Address
                document.getElementById("DOB").innerHTML = resumeData.personal_details.DOB
                document.getElementById("declaration").innerHTML = resumeData.declaration
               
                
                
    let trs="";
    for (let each of resumeData.education){
        trs=trs+`<tr><td>${each.course_name}</td>
            <td>${each.inst_name}</td>
            <td>${each.percentage}</td>
            <td>${each. year_of_passed}</td></tr>`
    }
    document.getElementById("trs").innerHTML=trs
    
    let input="";
    for (let each of resumeData.project){
        input=input+`<tr><td>${each.project_name}</td>
            <td>${each.duration}</td>
            <td>${each.position}</td>
            <td>${each.organization}</td></tr>`
    }
    document.getElementById("input").innerHTML=input

    let data="";
    for (let each of resumeData.experience){
        data=data+`<tr><td>${each.company_name}</td>
            <td>${each.year}</td>
            <td>${each.position}</td>
            <td>${each.year_of_experience}</td></tr>`
    }
    document.getElementById("data").innerHTML=data

    let list=""
    for(let each of resumeData.skills){
        list=list+`<li>${each}</li>`
    }
document.getElementById("skill").innerHTML=list


let hobby=""
for(let each of resumeData.personal_details.hobbies){
    hobby=hobby+`<li>${each}</li>`
    }
    document.getElementById("hobby").innerHTML=hobby
   
let language=""
for(let each of resumeData.personal_details.languages){
    language=language+`<li>${each}</li>`
     }
   document.getElementById("languages").innerHTML=language  
   


                // title=title+`<h4>${doc.data(id).title}</h4>`
                // title=title+`<h4>${doc.data(id).name}</h4>`
                // title=title+`<h4>${doc.data(id).place}</h4>`
                // title=title+`<h4>${doc.data(id).objectives}</h4>`
                // title=title+`<h4>${doc.data(id).contact}</h4>`
                // title=title+`<h4>${doc.data(id).email}</h4>`
                // title=title+`<h4>${doc.data(id).declaration}</h4>`
            }
        })
        // document.getElementById("titleview").innerHTML=title
    })



    if(!localStorage.getItem("userdatas")){
    location="login.html"
}
    

        
</script>
</html>